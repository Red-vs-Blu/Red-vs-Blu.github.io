{"version":3,"sources":["../node_modules/truffle-contract/node_modules/web3-eth-accounts/src sync","../node_modules/truffle-interface-adapter/node_modules/web3-eth-accounts/src sync","contract/loadWeb3.js","App.js","registerServiceWorker.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","LoadWeb3","Promise","reject","web3","window","ethereum","Web3","console","log","provider","providers","HttpProvider","App","props","resolve_promise","f","args","err","result","instantiateContract","a","contract","require","RVB","RedVsBlueABI","setProvider","currentProvider","deployed","then","instance","subscribeToEvents","updateCreditBalance","refreshRound","NewVoteCast","on","event","getFirstAccount","account0","oneAccountInitTime","request","method","accounts","length","alert","getBlocksLeftInRound","params","bn","parseInt","state","BLOCK_DIV","getRoundFromETH","updateRoundTotals","round_id","app_account","GetGameTotals","from","setState","round_rewards_loading","red_total","Number","fromWei","blue_total","updatePercentages","updateRewardsForRound","latest_round","blocks_left","ongoing_round_id","is_active","current_block","prevRound","nextRound","latestRound","buyCredits","BuyCredits","value","toWei","tx_amount","tx","withdrawCredits","WithdrawCredits","GetEarnings","winnings","bet_amount","claimed","round_rewards","round_bets","round_claimable","catch","GetCreditBalance","balance","credits","credit_balance","claimRewards","ClaimEarnings","castVote","is_blue","CastVote","txAmountChanged","bind","voteRed","voteBlue","red_percent","blue_percent","results","v","sum","s","this","getPercentage","slice","target","className","style","width","onClick","marginRight","getPercentageStr","rel","href","type","onChange","Component","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","error","ReactDOM","render","document","getElementById","URL","process","origin","addEventListener","fetch","response","status","headers","get","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.e17d7044.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 458;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 555;","// Contract details + web3 loading.\nimport Web3 from \"web3\";\n\n// Promise that loads or injects a web3 instance.\nlet LoadWeb3 = new Promise(function(resolve, reject) {\n    var web3 = window.web3;\n    if (window.ethereum) {\n        web3 = new Web3(window.ethereum);\n    }\n    if (typeof web3 !== \"undefined\") {\n        console.log(\"Detected pre-injected Web3\");\n        resolve({ web3: web3 });\n    } else {\n        var provider = new Web3.providers.HttpProvider(\"http://127.0.0.1:7545\");\n        console.log(\"No Web3 instance found, using local http provider\");\n        resolve({ web3: new Web3(provider) });\n    }\n});\n\nexport default LoadWeb3;\n","/*\n *  Entry-point for the RedVsBlue application.\n */\n\n// React and associated components.\nimport React, { Component } from \"react\";\n\n// Ethereum contract ABI and Web3 loader.\nimport LoadWeb3  from \"./contract/loadWeb3\";\nimport RedVsBlueABI from \"./contract/RedVsBlueABI.json\";\n\nimport \"./App.css\";\n\n////////////////////////////////////////////////////////////////////////////////\n\nclass App extends Component {\n    // App constructor - sets up default state.\n    constructor(props) {\n        super(props);\n\n        /*\n         *  Input element `tx_amount` is the amount to buy / withdraw / vote.\n         *  This handler just makes sure that the state copy is updated.\n         */\n        this.txAmountChanged = this.txAmountChanged.bind(this);\n\n        /*\n         *  Vault functions - buy and withdraw credits. Fairly simple stuff.\n         */\n        this.claimRewards = this.claimRewards.bind(this);\n        this.buyCredits = this.buyCredits.bind(this);\n        this.withdrawCredits = this.withdrawCredits.bind(this);\n\n        /*\n         *  Refresh a round based on the round the user wants to see. This is\n         *  largely where we draw all the UI elements on major changes to the\n         *  game state (round changed, new round started).\n         */\n        this.refreshRound = this.refreshRound.bind(this);\n\n        /*\n         *  Voting functions. Only valid for the active round as determined by\n         *  the block number.\n         */\n        this.voteRed = this.voteRed.bind(this);\n        this.voteBlue = this.voteBlue.bind(this);\n\n        /*\n         *  Round related management - advance to current or view old games and\n         *  payouts. Only the `round_id` is advanced or changed due to this.\n         *  As such, a call to refresh_round is required to update the relevant\n         *  game totals.\n         */\n        this.prevRound = this.prevRound.bind(this);\n        this.nextRound = this.nextRound.bind(this);\n\n        this.updateRewardsForRound = this.updateRewardsForRound.bind(this);\n        this.updateCreditBalance = this.updateCreditBalance.bind(this);\n\n        this.web3     = null;\n        this.contract = null;\n\n        this.account0 = null;\n        this.oneAccountInitTime = false;\n\n        this.state = {\n            /*\n             *  Constants.\n             */\n            BLOCK_DIV: 4096,\n\n            /*\n             *  Active is set enabled if the current game being viewed is the\n             *  current round.\n             */\n            is_active: false,\n\n            /*\n             *  Game related statistics - game id, and totals to render.\n             */\n            round_id: -1,\n            current_block: -1,\n            ongoing_round_id: -1,\n            red_total: Number(-1),\n            blue_total: Number(-1),\n            round_rewards_loading: true,\n            round_rewards: Number(0),\n            round_bets: Number(0),\n            round_claimable: false,\n\n            /*\n             *  Input field for vote value, deposit, and withdrawal amount.\n             */\n            tx_amount: 100,\n\n            /*\n             *  Local rendering related state variables.\n             */\n            red_percent: 50.0,\n            blue_percent: 50.0,\n\n            /*\n             * Vault - mirror of balance etc and effective positive $$.\n             */\n            credit_balance: 0,\n        };\n    }\n\n    // mounted ::\n    componentDidMount() {\n        LoadWeb3.then(results => {\n            this.web3 = results.web3;\n            this.instantiateContract();\n        }).catch(() => {\n            console.log(\"Unable to load Web3\");\n        });\n    }\n\n    ////////////////////////////////////////////////////////////////////////////\n    // Helpers.\n    ////////////////////////////////////////////////////////////////////////////\n\n    resolve_promise = (f, args=[]) => {\n        return new Promise((resolve, reject) => {\n            f(...args, (err, result) => {\n                if (err !== null) reject(err);\n                else resolve(result);\n            });\n        });\n    }\n\n    getPercentage(v, sum) {\n        if (sum === 0) return 50;\n        if (v === sum) return 100;\n        if (v === 0) return 0;\n        return (100.0 * v) / sum;\n    }\n\n    getPercentageStr(v, sum) {\n        let s = (\"\" + this.getPercentage(v, sum));\n        if (s.length > 5) {\n            s = s.slice(0, 5)\n        }\n        return s;\n    }\n\n    ////////////////////////////////////////////////////////////////////////////\n    //  Contract basics.\n    ////////////////////////////////////////////////////////////////////////////\n\n    instantiateContract = async () => {\n        const contract = require(\"truffle-contract\");\n        const RVB = contract(RedVsBlueABI);\n        RVB.setProvider(this.web3.currentProvider);\n        RVB.deployed().then(async (instance) => {\n            this.contract = instance;\n            this.subscribeToEvents();\n            await this.updateCreditBalance();\n            await this.refreshRound();\n        });\n    }\n\n    subscribeToEvents = async () => {\n        this.contract.NewVoteCast().on(\"data\", event => {\n            this.refreshRound();\n        });\n\n    }\n\n    ////////////////////////////////////////////////////////////////////////////\n    //  Accounts and other web3.eth stuff.\n    ////////////////////////////////////////////////////////////////////////////\n\n    getFirstAccount = async () => {\n        if (!this.account0 && !this.oneAccountInitTime) {\n            this.oneAccountInitTime = true;\n            const accounts = await window.ethereum.request({ method: \"eth_accounts\" });\n            if (accounts.length === 0) {\n                alert(\"Web3 account not found. Connect this site to your web3 wallet and refresh this page.\");\n                return;\n            }\n            this.account0 = accounts[0];\n        }\n\n        return this.account0;\n    }\n\n    getBlocksLeftInRound = async () => {\n        const bn = await window.ethereum.request({method: \"eth_blockNumber\", params: []})\n        return parseInt(parseInt(bn) % this.state.BLOCK_DIV);\n    }\n\n    getRoundFromETH = async () => {\n        const bn = await window.ethereum.request({method: \"eth_blockNumber\", params: []})\n        return parseInt(parseInt(bn) / this.state.BLOCK_DIV);\n    }\n\n    ////////////////////////////////////////////////////////////////////////////\n    //  Round updates for totals, percentages UI etc as well as refresh logic.\n    ////////////////////////////////////////////////////////////////////////////\n\n    updatePercentages() {\n        const sum = this.state.red_total + this.state.blue_total;\n        this.setState({\n            red_percent: this.getPercentage(this.state.red_total, sum),\n            blue_percent: this.getPercentage(this.state.blue_total, sum),\n        });\n    }\n\n    updateRoundTotals = async () => {\n        // Only valid if the current round is active and valid.\n        if (this.state.round_id < 0) return;\n\n        const app_account = await this.getFirstAccount();\n        this.contract.GetGameTotals(this.state.round_id, {\n            from: app_account,\n        }).then((result, err) => {\n            this.setState({\n                round_rewards_loading: true,\n                red_total: Number(this.web3.fromWei(result[0], 'milli')),\n                blue_total: Number(this.web3.fromWei(result[1], 'milli')),\n            }, () => {\n                this.updatePercentages();\n                this.updateRewardsForRound();\n            });\n        });\n    }\n\n    refreshRound = async () => {\n        const latest_round = await this.getRoundFromETH();\n        const blocks_left  = await this.getBlocksLeftInRound();\n\n        /*\n         *  First time we are being called - set the current and latest round\n         *  to the same value.\n         */\n        if (this.state.round_id === -1) {\n            this.setState({\n                round_id: latest_round,\n                ongoing_round_id: latest_round,\n                is_active: true,\n                current_block: blocks_left,\n            }, this.updateRoundTotals);\n        }\n\n        /*\n         *  Subsequent call, only update the latest round and not the round that\n         *  the viewer is potentially seeing.\n         */\n        else {\n            this.setState({\n                ongoing_round_id: latest_round,\n                is_active: (this.state.round_id === latest_round),\n                current_block: blocks_left,\n            }, this.updateRoundTotals);\n        }\n    }\n\n    prevRound = async () => {\n        if (this.state.round_id > 0) {\n            this.setState({\n                round_rewards_loading: true,\n                round_id: this.state.round_id - 1,\n                is_active: false,\n            }, this.refreshRound);\n        }\n    }\n\n    nextRound = async () => {\n        if (this.state.round_id < this.state.ongoing_round_id) {\n            const is_active = (this.state.ongoing_round_id === this.state.round_id + 1);\n            this.setState({\n                round_rewards_loading: true,\n                round_id: this.state.round_id + 1,\n                is_active: is_active,\n            }, this.refreshRound);\n        }\n    }\n\n    latestRound = async () => {\n        const latest_round = await this.getRoundFromETH();\n        this.setState({\n            round_rewards_loading: true,\n            round_id: latest_round,\n            ongoing_round_id: latest_round,\n            is_active: true,\n        }, this.refreshRound);\n    }\n\n    ////////////////////////////////////////////////////////////////////////////\n    // Contract Vault functions.\n    ////////////////////////////////////////////////////////////////////////////\n\n    buyCredits = async () => {\n        const app_account = await this.getFirstAccount();\n        this.contract.BuyCredits({\n            from: app_account,\n            value: this.web3.toWei(this.state.tx_amount, 'milli'),\n        }).then((tx, err) => {\n            if (err) {\n                alert(\"Error buying credits -- try again!\");\n                return;\n            }\n            this.updateCreditBalance();\n        });\n    }\n\n    withdrawCredits = async () => {\n        const app_account = await this.getFirstAccount();\n        this.contract.WithdrawCredits(\n            this.web3.toWei(this.state.tx_amount, 'milli'),\n            {\n                from: app_account,\n            }\n        ).then((tx, err) => {\n            if (err) {\n                alert(\"Error buying credits -- try again!\");\n                return;\n            }\n            this.updateCreditBalance();\n        });\n    }\n\n    updateRewardsForRound = async () => {\n        const app_account = await this.getFirstAccount();\n        this.contract.GetEarnings(this.state.round_id, {\n            from: app_account,\n        }).then((result) => {\n            const winnings = this.web3.fromWei(result[0], 'milli');\n            const bet_amount = this.web3.fromWei(result[1], 'milli');\n            const claimed = result[2];\n            this.setState({\n                round_rewards_loading: false,\n                round_rewards: winnings,\n                round_bets: bet_amount,\n                round_claimable: !claimed,\n            });\n        }).catch((err) => {\n            console.log(\"updateRewardsForRound ERR \", err);\n        });\n    }\n\n    updateCreditBalance = async () => {\n        const app_account = await this.getFirstAccount();\n        this.contract.GetCreditBalance({\n            from: app_account,\n        }).then((balance) => {\n            const credits = Number(this.web3.fromWei(balance, 'milli'));\n            this.setState({credit_balance: credits});\n        });\n    }\n\n    claimRewards = async () => {\n        const app_account = await this.getFirstAccount();\n        this.contract.ClaimEarnings(this.state.round_id, {\n            from: app_account,\n        }).then((result) => {\n            this.updateCreditBalance();\n            this.updateRewardsForRound();\n        });\n    }\n\n    ////////////////////////////////////////////////////////////////////////////\n\n    castVote = async (is_blue) => {\n        const app_account = await this.getFirstAccount();\n        this.contract.CastVote(\n            this.web3.toWei(this.state.tx_amount, 'milli'),\n            is_blue,\n            {\n                from: app_account,\n            }\n        ).then((tx, err) => {\n            if (err) {\n                alert(\"Error casting vote -- try again!\");\n                return;\n            }\n            this.updateCreditBalance();\n        });\n    }\n\n    ////////////////////////////////////////////////////////////////////////////\n    // User Interaction.\n    ////////////////////////////////////////////////////////////////////////////\n\n    voteRed() { this.castVote(0); }\n    voteBlue() { this.castVote(1); }\n    txAmountChanged(event) { this.setState({tx_amount: event.target.value}); }\n\n    render() {\n        return (\n          <div className=\"App\">\n            <div className=\"App-bg\">\n                <div className=\"App-header\">\n                    <div className=\"App-header-red\" style={{width: \"50%\"}} onClick={this.voteRed}>\n                        <div style={{marginRight: \"10px\"}}>RED:</div>\n                        <div>{this.getPercentageStr(this.state.red_total, this.state.red_total + this.state.blue_total)}%</div>\n                    </div>\n                    <div className=\"App-header-blue\" style={{width: \"50%\"}} onClick={this.voteBlue}>\n                        <div style={{marginRight: \"10px\"}}>BLUE:</div>\n                        <div>{this.getPercentageStr(this.state.blue_total, this.state.red_total + this.state.blue_total)}%</div>\n                    </div>\n                </div>\n                <div className=\"App-header\">\n                    <div className=\"App-header-red\" style={{width: \"50%\"}} onClick={this.voteRed}>\n                        <div>{this.state.red_total}</div>\n                    </div>\n                    <div className=\"App-header-blue\" style={{width: \"50%\"}} onClick={this.voteBlue}>\n                        <div>{this.state.blue_total}</div>\n                    </div>\n                </div>\n                <div className=\"App-split\">\n                    <div className=\"App-red\" style={{width: this.getPercentage(this.state.red_total, this.state.red_total + this.state.blue_total)+\"%\"}}>\n                        {!this.state.is_active && this.state.red_total > this.state.blue_total && <span>WINNER</span>}\n                        {this.state.is_active && this.state.red_total > this.state.blue_total && <span>WINNING</span>}\n                        {!this.state.is_active && this.state.blue_total > this.state.red_total && <span>LOSER</span>}\n                        {this.state.is_active && this.state.blue_total > this.state.red_total && <span>LOSING</span>}\n                        {!this.state.is_active && this.state.blue_total === this.state.red_total && <span>TIED</span>}\n                        {this.state.is_active && this.state.blue_total === this.state.red_total && <span>TIE</span>}\n                    </div>\n                    <div className=\"App-blue\" style={{width: this.getPercentage(this.state.blue_total, this.state.red_total + this.state.blue_total)+\"%\"}}>\n                        {!this.state.is_active && this.state.red_total > this.state.blue_total && <span>LOSER</span>}\n                        {this.state.is_active && this.state.red_total > this.state.blue_total && <span>LOSING</span>}\n                        {!this.state.is_active && this.state.blue_total > this.state.red_total && <span>WINNER</span>}\n                        {this.state.is_active && this.state.blue_total > this.state.red_total && <span>WINNING</span>}\n                        {!this.state.is_active && this.state.blue_total === this.state.red_total && <span>TIED</span>}\n                        {this.state.is_active && this.state.blue_total === this.state.red_total && <span>TIE</span>}\n                    </div>\n                </div>\n            </div>\n            <div className=\"App-body\">\n                <div>\n                    <h4>\n                        <div>A game of tug-of-war.</div>\n                        <div>\n                            <span>Round: </span>\n                            {this.state.round_id > 0 && <button className=\"link-button\" onClick={this.prevRound}>&lt;</button>}\n                            {this.state.round_id}{this.state.is_active && <span> [ongoing] </span>}\n                            {!this.state.is_active && <button className=\"link-button\" onClick={this.nextRound}>&gt;</button>}\n                            {!this.state.is_active && <span className=\"App-latest-btn\" onClick={this.latestRound}> latest</span>}\n                        </div>\n                    </h4>\n                    <p>* No token b/s, 1 ETH == 1000 credits</p>\n                    <p>* Losing color pays winning color</p>\n                    <p>* New round every {this.state.BLOCK_DIV} blocks [{this.state.BLOCK_DIV - this.state.current_block} blocks left]</p>\n                    <p>* No fees, <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/Red-vs-Blu/RedVsBlue/blob/master/contracts/RedVsBlue.sol\">contract here</a></p>\n                    <p>* Project page and <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/Red-vs-Blu/RedVsBlue#how-to-play\">extended rules</a></p>\n                    {!this.state.is_active && this.state.round_rewards_loading && (\n                        <p>* Result: {this.state.round_rewards_loading && <span>Computing ...</span>}</p>\n                    )}\n                    {!this.state.is_active && !this.state.round_rewards_loading && (\n                        <p>* Result:\n                                {this.state.round_rewards}\n                                {this.state.round_rewards >= this.state.round_bets && <span className=\"profit\"> (+{this.state.round_rewards - this.state.round_bets})</span>}\n                                {this.state.round_rewards < this.state.round_bets && <span className=\"loss\"> ({this.state.round_rewards - this.state.round_bets})</span>}\n                                {this.state.round_claimable && this.state.round_rewards > 0 && <button type=\"button\" className=\"link-button\" onClick={this.claimRewards}>claim</button>}\n                                {!this.state.round_claimable && this.state.round_rewards > 0 && <span> [claimed] </span>}\n                        </p>\n                    )}\n                    {this.state.is_active &&\n                        <p>* Ongoing round,\n                            <span className=\"color-red\"> {this.state.red_total} </span>\n                            vs\n                            <span className=\"color-blue\"> {this.state.blue_total} </span>\n                        </p>\n                    }\n                </div>\n                <br></br>\n                <div>\n                    <h4>You have {this.state.credit_balance} credits!</h4>\n                    <div className=\"App-input\">\n                        {this.state.is_active && <div className=\"App-red\" onClick={this.voteRed}>Vote Red</div>}\n                        <input type=\"number\" value={this.state.tx_amount} onChange={this.txAmountChanged} />\n                        {this.state.is_active && <div className=\"App-blue\" onClick={this.voteBlue}>Vote Blue</div>}\n                    </div>\n                    <div className=\"App-toolbar\">\n                        <button type=\"button\" className=\"link-button\" onClick={this.buyCredits}>+ Deposit</button>\n                        <button type=\"button\" className=\"link-button\" onClick={this.withdrawCredits}>- Withdraw</button>\n                    </div>\n                </div>\n                <br></br>\n            </div>\n          </div>\n        );\n    }\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\nexport default App;\n\n////////////////////////////////////////////////////////////////////////////////\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport registerServiceWorker from \"./registerServiceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\nregisterServiceWorker();\n"],"sourceRoot":""}